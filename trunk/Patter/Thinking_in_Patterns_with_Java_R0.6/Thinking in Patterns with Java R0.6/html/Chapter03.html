<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<!--
This document was converted from RTF source: 
By rtftohtml 4.19
See http://www.sunpack.com/RTF
Filename:TIPatterns.rtf
Application Directory:c:\tools\rtf2html\
Subject:
Author:Bruce Eckel
Operator:Bruce Eckel
Document Comments:
Version Comments:
Comments:
Keywords:
Translation Date:09/08/2001
Translation Time:10:16:40
Translation Platform:Win32
Number of Output files:18
This File:Chapter03.html
SplitDepth=1
SkipNavPanel=1
SkipLeadingToc=1
SkipTrailingToc=1
GenContents=1
GenFrames=1
GenIndex=1
-->
<HEAD lang="en"><META http-equiv="Content-Type" content="text/html">
<TITLE>3: Building application frameworks</TITLE>
</HEAD>

<BODY  BGCOLOR="#FFFFFF"><DIV ALIGN="CENTER">
  <a href="http://www.MindView.net">
  <img src="mindview-head.gif" alt="MindView Inc." BORDER = "0"></a>
  <CENTER>
    <FONT FACE="Verdana" size = "-1">
    [ <a href="README-HTML.txt">Viewing Hints</a> ]
    [ <a href="RevisionHistory.html">Revision History</a> ]
    [ <a href="Building-Code.html">Build the Code</a> ]
    [ <a href="TIPatterns-Corrections.html">Report an Error</a> ] <br>
    [ <a href="http://www.mindview.net/MailingList.html">Free Newsletter</a> ]
    [ <a href="http://www.mindview.net/Training.html">Seminars</a> ]
    [ <a href="http://www.mindview.net/CPPServices/#ConsultingServices">Consulting</a> ]
    </FONT>
  <H2><FONT FACE="Verdana">
  Thinking in Patterns <font size="4">with Java</font>, Revision 0.6</FONT></H2>
  <H3><FONT FACE="Verdana">&copy;2001 by Bruce Eckel</FONT></H3>
  
    <FONT FACE="Verdana" size = "-1">
     [ <a href="Chapter02.html">Previous Chapter</a> ] 
    [ <a href="SimpleContents.html">Short TOC</a> ] 
    [ <a href="Contents.html">Table of Contents</a> ] 
    [ <a href="DocIndex.html">Index</a> ]
     [ <a href="Chapter04.html">Next Chapter</a> ] 
    </FONT>
    
  </CENTER>
  </P></DIV><A NAME="_Toc375545413"></A><A NAME="_Toc455024531"></A><A NAME="_Toc476705896"></A><DIV ALIGN="LEFT"><P><A NAME="_Toc524504097"></A><BR></P></DIV>
<A NAME="Heading23"></A><FONT FACE = "Verdana"><H1 ALIGN="LEFT">
3: Building application frameworks</H1></FONT>
<DIV ALIGN="LEFT"><P><FONT FACE="Georgia">An application framework allows you to
inherit from a class or set of classes and create a new application, reusing
most of the code in the existing classes and overriding one or more methods in
order to customize the application to your needs. A fundamental concept in the
application framework is the <I>Template Method</I> which is typically hidden
beneath the covers and drives the application by calling the various methods in
the base class (some of which you have overridden in order to create the
application).</FONT><BR></P></DIV>
<DIV ALIGN="LEFT"><P><FONT FACE="Georgia">For example, whenever you create an
applet you&#8217;re using an application framework: you inherit from
<B>JApplet</B> and then override <B>init(&#160;)</B>. The applet mechanism
(which is a <I>Template Method</I>)<I> </I>does the rest by drawing the screen,
handling the event loop, resizing,
etc.</FONT><A NAME="_Toc476705897"></A><A NAME="_Toc524504098"></A><BR></P></DIV>
<A NAME="Heading24"></A><FONT FACE = "Verdana"><H2 ALIGN="LEFT">
Template method</H2></FONT>
<DIV ALIGN="LEFT"><P><FONT FACE="Georgia">An important characteristic of the
<I>Template Method</I> is that it is defined in the base class and cannot be
changed. It&#8217;s sometimes a <B>private</B> method but it&#8217;s virtually
always <B>final</B>. It calls other base-class methods (the ones you override)
in order to do its job, but it is usually called only as part of an
initialization process (and thus the client programmer isn&#8217;t necessarily
able to call it directly).</FONT><BR></P></DIV>

<BLOCKQUOTE><FONT SIZE = "+1"><PRE><font color=#009900>//: c03:TemplateMethod.java</font>
<font color=#009900>// Simple demonstration of Template Method.</font>
<font color=#0000ff>import</font> com.bruceeckel.test.*;

<font color=#0000ff>abstract</font> <font color=#0000ff>class</font> ApplicationFramework {
  <font color=#0000ff>public</font> ApplicationFramework() {
    templateMethod(); <font color=#009900>// Dangerous!</font>
  }
  <font color=#0000ff>abstract</font> <font color=#0000ff>void</font> customize1();
  <font color=#0000ff>abstract</font> <font color=#0000ff>void</font> customize2();
  <font color=#009900>// "private" means automatically "final":</font>
  <font color=#0000ff>private</font> <font color=#0000ff>void</font> templateMethod() {
    <font color=#0000ff>for</font>(<font color=#0000ff>int</font> i = 0; i &lt; 5; i++) {
      customize1();
      customize2();
    }
  }
}

<font color=#009900>// Create a new "application":</font>
<font color=#0000ff>class</font> MyApp <font color=#0000ff>extends</font> ApplicationFramework {
  <font color=#0000ff>void</font> customize1() { 
    System.out.print(<font color=#004488>"Hello "</font>);
  }
  <font color=#0000ff>void</font> customize2() { 
    System.out.println(<font color=#004488>"World!"</font>);
  }
}

<font color=#0000ff>public</font> <font color=#0000ff>class</font> TemplateMethod <font color=#0000ff>extends</font> UnitTest {
  MyApp app = <font color=#0000ff>new</font> MyApp();
  <font color=#0000ff>public</font> <font color=#0000ff>void</font> test() {
    <font color=#009900>// The MyApp constructor does all the work.</font>
    <font color=#009900>// This just makes sure it will complete </font>
    <font color=#009900>// without throwing an exception.</font>
  }
  <font color=#0000ff>public</font> <font color=#0000ff>static</font> <font color=#0000ff>void</font> main(String args[]) {
    <font color=#0000ff>new</font> TemplateMethod().test();
  }
} <font color=#009900>///:~</font></PRE></FONT></BLOCKQUOTE><DIV ALIGN="LEFT"><P><FONT FACE="Georgia">The base-class constructor
is responsible for performing the necessary initialization and then starting the
&#8220;engine&#8221; (the template method) that runs the application (in a GUI
application, this &#8220;engine&#8221; would be the main event loop). The client
programmer simply provides definitions for <B>customize1(&#160;)</B> and
<B>customize2(&#160;)</B> and the &#8220;application&#8221; is ready to
run.</FONT><A NAME="_Toc524504099"></A><BR></P></DIV>
<A NAME="Heading25"></A><FONT FACE = "Verdana"><H2 ALIGN="LEFT">
Exercises</H2></FONT>
<OL>
<LI><FONT FACE="Verdana">	</FONT><FONT FACE="Georgia">Create a framework that
takes a list of file names on the command line. It opens each file except the
last for reading, and the last for writing. The framework will process each
input file using an undetermined policy and write the output to the last file.
Inherit to customize this framework to create two separate
applications:</FONT><BR><FONT FACE="Georgia">1) Converts all the letters in each
file to uppercase.</FONT><BR><FONT FACE="Georgia">2) Searches the files for
words given in the first file.</FONT></OL>
<DIV ALIGN="CENTER">
    <FONT FACE="Verdana" size = "-1">
     [ <a href="Chapter02.html">Previous Chapter</a> ] 
    [ <a href="SimpleContents.html">Short TOC</a> ] 
    [ <a href="Contents.html">Table of Contents</a> ] 
    [ <a href="DocIndex.html">Index</a> ]
     [ <a href="Chapter04.html">Next Chapter</a> ] 
    </FONT>
    <BR>
 Last Update:09/08/2001</P></DIV>

</BODY>

</HTML>
